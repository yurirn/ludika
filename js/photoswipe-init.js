var initPhotoSwipeFromDOM=function(e){var t=function(e){for(var t,n,r,i,a=e.childNodes,o=a.length,l=[],u=0;o>u;u++)t=a[u],1===t.nodeType&&(n=t.children[0],r=n.getAttribute("data-size").split("x"),i={src:n.getAttribute("href"),w:parseInt(r[0],10),h:parseInt(r[1],10)},t.children.length>1&&(i.title=t.children[1].innerHTML),n.children.length>0&&(i.msrc=n.children[0].getAttribute("src")),i.el=t,l.push(i));return l},n=function s(e,t){return e&&(t(e)?e:s(e.parentNode,t))},r=function(e){e=e||window.event,e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,r=n(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){for(var i,o=r.parentNode,l=r.parentNode.childNodes,u=l.length,d=0,c=0;u>c;c++)if(1===l[c].nodeType){if(l[c]===r){i=d;break}d++}return i>=0&&a(i,o),!1}},i=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var n=e.split("&"),r=0;r<n.length;r++)if(n[r]){var i=n[r].split("=");i.length<2||(t[i[0]]=i[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t},a=function(e,n,r,i){var a,o,l,u=document.querySelectorAll(".pswp")[0];if(l=t(n),o={galleryUID:n.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=l[e].el.getElementsByTagName("img")[0],n=window.pageYOffset||document.documentElement.scrollTop,r=t.getBoundingClientRect();return{x:r.left,y:r.top+n,w:r.width}}},i)if(o.galleryPIDs){for(var d=0;d<l.length;d++)if(l[d].pid==e){o.index=d;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);isNaN(o.index)||(r&&(o.showAnimationDuration=0),a=new PhotoSwipe(u,PhotoSwipeUI_Default,l,o),a.init())},o=function(){var e=document.querySelectorAll("[data-imagezoom]");Array.prototype.forEach.call(e,function(e,t){var n=new Image;n.src=e.origin+e.pathname,n.onload=function(){e.setAttribute("data-size",this.naturalWidth+"x"+this.naturalHeight)}})};o();for(var l=document.querySelectorAll(e),u=0,d=l.length;d>u;u++)l[u].setAttribute("data-pswp-uid",u+1),l[u].onclick=r;var c=i();c.pid&&c.gid&&a(c.pid,l[c.gid-1],!0,!0)};initPhotoSwipeFromDOM(".my-gallery");